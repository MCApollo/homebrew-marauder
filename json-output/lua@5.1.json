{
    "name": "LuaAT51",
    "description": "Powerful, lightweight programming language (v5.1.5)",
    "url": "https://www.lua.org/ftp/lua-5.1.5.tar.gz",
    "mirror": "https://deb.debian.org/debian/pool/main/l/lua5.1/lua5.1_5.1.5.orig.tar.gz",
    "homepage": "https://www.lua.org/",
    "depends": [],
    "resource": [],
    "conflicts": [],
    "patches": [
        {
            "url": null,
            "data": [
                "diff --git a/Makefile b/Makefile\n",
                "index 209a132..9387b09 100644\n",
                "--- a/Makefile\n",
                "+++ b/Makefile\n",
                "@@ -43,7 +43,7 @@ PLATS= aix ansi bsd freebsd generic linux macosx mingw posix solaris\n",
                " # What to install.\n",
                " TO_BIN= lua luac\n",
                " TO_INC= lua.h luaconf.h lualib.h lauxlib.h ../etc/lua.hpp\n",
                "-TO_LIB= liblua.a\n",
                "+TO_LIB= liblua.5.1.5.dylib\n",
                " TO_MAN= lua.1 luac.1\n",
                "\n",
                " # Lua version and release.\n",
                "@@ -64,6 +64,8 @@ install: dummy\n",
                "\tcd src && $(INSTALL_DATA) $(TO_INC) $(INSTALL_INC)\n",
                "\tcd src && $(INSTALL_DATA) $(TO_LIB) $(INSTALL_LIB)\n",
                "\tcd doc && $(INSTALL_DATA) $(TO_MAN) $(INSTALL_MAN)\n",
                "+\tln -s -f liblua.5.1.5.dylib $(INSTALL_LIB)/liblua.5.1.dylib\n",
                "+\tln -s -f liblua.5.1.dylib $(INSTALL_LIB)/liblua5.1.dylib\n",
                "\n",
                " ranlib:\n",
                "\tcd src && cd $(INSTALL_LIB) && $(RANLIB) $(TO_LIB)\n",
                "diff --git a/src/Makefile b/src/Makefile\n",
                "index e0d4c9f..4477d7b 100644\n",
                "--- a/src/Makefile\n",
                "+++ b/src/Makefile\n",
                "@@ -22,7 +22,7 @@ MYLIBS=\n",
                "\n",
                " PLATS= aix ansi bsd freebsd generic linux macosx mingw posix solaris\n",
                "\n",
                "-LUA_A=\tliblua.a\n",
                "+LUA_A=\tliblua.5.1.5.dylib\n",
                " CORE_O=\tlapi.o lcode.o ldebug.o ldo.o ldump.o lfunc.o lgc.o llex.o lmem.o \\\n",
                "\tlobject.o lopcodes.o lparser.o lstate.o lstring.o ltable.o ltm.o  \\\n",
                "\tlundump.o lvm.o lzio.o\n",
                "@@ -48,11 +48,13 @@ o:\t$(ALL_O)\n",
                " a:\t$(ALL_A)\n",
                "\n",
                " $(LUA_A): $(CORE_O) $(LIB_O)\n",
                "-\t$(AR) $@ $(CORE_O) $(LIB_O)\t# DLL needs all object files\n",
                "-\t$(RANLIB) $@\n",
                "+\t$(CC) -dynamiclib -install_name @LUA_PREFIX@/lib/liblua.5.1.dylib \\\n",
                "+\t\t-compatibility_version 5.1 -current_version 5.1.5 \\\n",
                "+\t\t-o liblua.5.1.5.dylib $^\n",
                "\n",
                " $(LUA_T): $(LUA_O) $(LUA_A)\n",
                "-\t$(CC) -o $@ $(MYLDFLAGS) $(LUA_O) $(LUA_A) $(LIBS)\n",
                "+\t$(CC) -fno-common $(MYLDFLAGS) \\\n",
                "+\t\t-o $@ $(LUA_O) $(LUA_A) -L. -llua.5.1.5 $(LIBS)\n",
                "\n",
                " $(LUAC_T): $(LUAC_O) $(LUA_A)\n",
                "\t$(CC) -o $@ $(MYLDFLAGS) $(LUAC_O) $(LUA_A) $(LIBS)\n",
                "@@ -99,7 +101,7 @@ linux:\n",
                "\t$(MAKE) all MYCFLAGS=-DLUA_USE_LINUX MYLIBS=\"-Wl,-E -ldl -lreadline -lhistory -lncurses\"\n",
                "\n",
                " macosx:\n",
                "-\t$(MAKE) all MYCFLAGS=-DLUA_USE_LINUX MYLIBS=\"-lreadline\"\n",
                "+\t$(MAKE) all MYCFLAGS=\"MYCFLAGS_VAL\" MYLIBS=\"-lreadline\"\n",
                " # use this on Mac OS X 10.3-\n",
                " #\t$(MAKE) all MYCFLAGS=-DLUA_USE_MACOSX\n"
            ]
        }
    ],
    "install": [
        "inreplace \"src/Makefile\" do |s|",
        "s.gsub! \"@LUA_PREFIX@\", prefix",
        "s.remove_make_var! \"CC\"",
        "s.change_make_var! \"CFLAGS\", \"#{ENV.cflags} $(MYCFLAGS)\"",
        "s.change_make_var! \"MYLDFLAGS\", ENV.ldflags",
        "s.sub! \"MYCFLAGS_VAL\", \"-fno-common -DLUA_USE_LINUX\""
    ],
    "version": "5.1.5"
}